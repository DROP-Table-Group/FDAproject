# 高频金融数据分析应用

## 应用概述

这是一个基于Streamlit的高频金融数据分析Web应用，专门用于分析比特币等加密货币的高频行情数据。应用可以计算收益率和波动率，生成详细的描述性统计报告和可视化图表。

## 功能特性

### 1. 数据上传与处理
- 支持上传CSV格式的高频金融数据
- 自动识别价格列和时间戳
- 提供示例数据供测试使用
- 支持大文件处理

### 2. 收益率计算
- 支持对数收益率和简单收益率计算
- 自动处理缺失值和异常值
- 提供完整的描述性统计（均值、标准差、偏度、峰度等）
- Jarque-Bera正态性检验

### 3. 波动率分析
- 计算已实现波动率（Realized Volatility）
- 支持不同时间窗口（1分钟、5分钟、15分钟、1小时、1天）
- 可选年化处理
- 波动率聚类现象分析

### 4. 可视化图表
- 价格走势图（含移动平均线）
- 收益率时间序列和分布图
- 波动率时间序列和分布图
- 自相关函数（ACF）分析
- QQ图正态性检验
- 波动率聚类现象可视化

### 5. 风险指标
- Value at Risk (VaR) - 95%和99%置信水平
- Expected Shortfall (CVaR)
- Sharpe Ratio（假设无风险利率为0）

### 6. 报告生成
- 自动生成详细的分析报告
- 包含主要发现和结论
- 支持报告下载（TXT格式）

## 安装与运行

### 环境要求
- Python 3.8+
- 依赖包见 `requirements.txt`

### 安装步骤

1. 克隆或下载项目文件
2. 安装依赖包：
   ```bash
   pip install -r requirements.txt
   ```

3. 运行应用：
   ```bash
   streamlit run app.py
   ```

4. 在浏览器中打开显示的URL（通常是 http://localhost:8501）

### 使用虚拟环境（推荐）

```bash
# 创建虚拟环境
python -m venv venv

# 激活虚拟环境
# Linux/Mac:
source venv/bin/activate
# Windows:
venv\Scripts\activate

# 安装依赖
pip install -r requirements.txt

# 运行应用
streamlit run app.py
```

## 数据格式要求

### 必需列
- **时间戳列**: `Timestamp` 或包含时间信息的列
- **价格列**: `Close` 或包含收盘价/价格的列

### 可选列
- `Open`: 开盘价
- `High`: 最高价
- `Low`: 最低价
- `Volume`: 成交量

### 数据示例
```
Timestamp,Open,High,Low,Close,Volume
1325412060.0,4.58,4.58,4.58,4.58,0.0
1325412120.0,4.58,4.58,4.58,4.58,0.0
1325412180.0,4.58,4.58,4.58,4.58,0.0
```

## 使用指南

### 1. 启动应用
运行 `streamlit run app.py` 后，在浏览器中打开应用。

### 2. 数据上传
- 在左侧边栏选择"上传文件"或"使用示例数据"
- 上传CSV文件或点击"加载示例数据"
- 应用会自动识别数据格式

### 3. 分析设置
- **选择价格列**: 如果数据包含多个价格列，选择要分析的列
- **收益率计算方式**: 选择对数收益率（推荐）或简单收益率
- **波动率计算窗口**: 选择计算波动率的时间窗口
- **年化波动率**: 勾选以将波动率转换为年化值

### 4. 开始分析
点击"开始分析"按钮，应用会自动计算收益率和波动率。

### 5. 查看结果
- **数据预览**: 查看上传数据的基本信息和前几行
- **价格走势**: 查看价格图表和移动平均线
- **收益率分析**: 查看收益率统计和图表
- **波动率分析**: 查看波动率统计和图表
- **分析报告**: 查看完整的分析报告，可下载为TXT文件

## 技术架构

### 主要技术栈
- **Streamlit**: Web应用框架
- **Pandas**: 数据处理和分析
- **NumPy**: 数值计算
- **Plotly**: 交互式可视化
- **SciPy**: 科学计算和统计检验
- **Statsmodels**: 时间序列分析

### 应用结构
```
app.py                    # 主应用文件
requirements.txt          # 依赖包列表
btcusd_1-min_data.csv     # 示例数据文件
APP_README.md            # 应用说明文档
```

## 算法说明

### 收益率计算
- **对数收益率**: `r_t = ln(P_t / P_{t-1})`
- **简单收益率**: `r_t = (P_t - P_{t-1}) / P_{t-1}`

### 已实现波动率
- 基于高频收益率的平方和计算
- 支持不同时间窗口的滚动计算
- 年化公式: `σ_annual = σ_window × √(年化因子)`

### 统计检验
- **Jarque-Bera检验**: 检验收益率分布的正态性
- **自相关函数**: 分析时间序列的自相关性
- **QQ图**: 可视化分布与正态分布的差异

## 常见问题

### 1. 数据上传失败
- 检查文件格式是否为CSV
- 确保文件包含必需的价格列
- 检查文件编码（推荐使用UTF-8）

### 2. 计算速度慢
- 对于大数据文件，建议先进行采样或聚合
- 关闭不必要的可视化选项
- 使用较小的波动率计算窗口

### 3. 图表显示异常
- 检查浏览器是否支持WebGL
- 清除浏览器缓存
- 确保Plotly版本兼容

### 4. 依赖包安装失败
- 使用Python 3.8+版本
- 尝试使用清华镜像源：
  ```bash
  pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
  ```

## 扩展功能建议

### 未来版本计划
1. **更多数据格式支持**: Excel, JSON, Parquet等
2. **高级模型集成**: GARCH, HAR-RV等波动率预测模型
3. **实时数据接入**: 连接交易所API获取实时数据
4. **多资产分析**: 同时分析多个资产的相关性
5. **回测功能**: 简单的策略回测框架
6. **用户认证**: 多用户支持和数据隔离

### 自定义开发
应用采用模块化设计，易于扩展：
- `calculate_returns()`: 收益率计算模块
- `calculate_realized_volatility()`: 波动率计算模块
- `create_*_chart()`: 可视化模块
- `get_descriptive_stats()`: 统计模块

## 贡献指南

欢迎提交Issue和Pull Request来改进应用：

1. Fork项目仓库
2. 创建功能分支
3. 提交更改
4. 推送到分支
5. 创建Pull Request

## 许可证

本项目基于MIT许可证开源。

## 联系方式

如有问题或建议，请通过以下方式联系：
- 提交GitHub Issue
- 查看项目文档

---

**注意**: 本应用仅供教育和研究使用，不构成投资建议。金融市场投资有风险，请谨慎决策。